<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - Binary Executor</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; display:flex; height:100vh; align-items:center; justify-content:center; }
    .card { background:white; padding:2rem; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); width:300px; }
    .card h2 { margin-bottom:1rem; }
    input { width:100%; padding:0.5rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:4px; }
    button { width:100%; padding:0.5rem; background:#3498db; border:none; border-radius:4px; color:white; font-weight:bold; }
    p#error { color:red; display:none; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Admin Login</h2>
    <input id="tokenInput" type="password" placeholder="Admin token" required>
    <button onclick="login()">Login</button>
    <p id="error"></p>
  </div>

<script>
async function login() {
    const token = document.getElementById('tokenInput').value;
    const res = await fetch('/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({ token })
    });
    if (res.ok) {
        const params = new URLSearchParams(window.location.search);
        const next = params.get('next') || '/admin';
        window.location.href = next;
    } else {
        document.getElementById('error').innerText = "Invalid token";
        document.getElementById('error').style.display = "block";
    }
}
</script>
</body>
</html>
